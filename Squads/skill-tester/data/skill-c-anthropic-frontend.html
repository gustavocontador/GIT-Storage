<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prism Analytics â€” Skill C: Anthropic Frontend Design</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #09090B;
  --surface: #131316;
  --surface-elevated: #1C1C20;
  --surface-hover: #252529;
  --border: #27272A;
  --text-primary: #FAFAFA;
  --text-secondary: #A1A1AA;
  --accent-primary: #8B5CF6;
  --accent-secondary: #06B6D4;
  --accent-warm: #F97316;
  --success: #22C55E;
  --warning: #EAB308;
  --error: #EF4444;
  --sidebar-bg: #0E0E11;
  --sidebar-width: 260px;
  --header-height: 64px;
  --radius-card: 12px;
  --radius-btn: 8px;
  --radius-pill: 999px;
}
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--text-primary);
  overflow-x: hidden;
  min-height: 100vh;
}
h1, h2, h3, .serif { font-family: 'Instrument Serif', serif; }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--surface-hover); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-secondary); }

/* ========== Noise Texture ========== */
.noise-bg { position: relative; }
.noise-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size: 256px 256px;
  pointer-events: none;
  z-index: 0;
}
.noise-bg > * { position: relative; z-index: 1; }

/* ========== Sidebar ========== */
.sidebar {
  position: fixed; top: 0; left: 0;
  width: var(--sidebar-width); height: 100vh;
  background: var(--sidebar-bg);
  border-right: 1px solid var(--border);
  display: flex; flex-direction: column;
  z-index: 40; overflow-y: auto; overflow-x: hidden;
}
.sidebar-logo {
  font-family: 'Instrument Serif', serif;
  font-size: 28px;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.5px;
}
.nav-item {
  display: flex; align-items: center; gap: 12px;
  padding: 10px 16px; border-radius: var(--radius-btn);
  color: var(--text-secondary); cursor: pointer;
  transition: all 0.2s ease; position: relative;
  font-size: 14px; font-weight: 500;
}
.nav-item:hover { background: var(--surface-elevated); color: var(--text-primary); }
.nav-item.active {
  background: var(--surface-elevated); color: var(--text-primary);
  box-shadow: inset 3px 0 0 var(--accent-primary), 0 0 20px rgba(139,92,246,0.05);
}
.nav-item.active .nav-dot { display: block; }
.nav-dot {
  display: none; width: 6px; height: 6px; border-radius: 50%;
  background: var(--accent-primary); position: absolute; right: 12px;
  animation: pulse-dot 2s ease-in-out infinite;
}
@keyframes pulse-dot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(1.4); }
}

/* ========== Header ========== */
.header {
  position: fixed; top: 0; left: var(--sidebar-width); right: 0;
  height: var(--header-height);
  background: rgba(9,9,11,0.8); backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 28px; z-index: 30;
}
.breadcrumb { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--text-secondary); }
.breadcrumb span.current { color: var(--text-primary); }

.cmd-k-btn {
  display: flex; align-items: center; gap: 8px;
  padding: 7px 14px; border-radius: var(--radius-btn);
  border: 1px solid var(--border); background: var(--surface);
  color: var(--text-secondary); font-size: 13px;
  cursor: pointer; transition: all 0.2s ease;
}
.cmd-k-btn:hover { border-color: var(--accent-primary); color: var(--text-primary); }
.cmd-k-btn kbd {
  font-size: 11px; padding: 2px 6px; border-radius: 4px;
  background: var(--surface-elevated); border: 1px solid var(--border);
  font-family: inherit;
}

.gradient-border-btn {
  position: relative; padding: 8px 18px; border-radius: var(--radius-btn);
  background: var(--surface); color: var(--text-primary);
  font-size: 13px; font-weight: 600; cursor: pointer; border: none; z-index: 1;
  transition: all 0.2s ease;
}
.gradient-border-btn::before {
  content: ''; position: absolute; inset: -1px;
  border-radius: calc(var(--radius-btn) + 1px);
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  z-index: -1;
}
.gradient-border-btn:hover { background: var(--surface-elevated); transform: translateY(-1px); }

.notif-bell { position: relative; cursor: pointer; color: var(--text-secondary); transition: color 0.2s; }
.notif-bell:hover { color: var(--text-primary); }
.notif-badge {
  position: absolute; top: -4px; right: -4px;
  width: 16px; height: 16px; background: var(--error); border-radius: 50%;
  font-size: 10px; font-weight: 700;
  display: flex; align-items: center; justify-content: center;
  animation: badge-bounce 2s ease-in-out infinite;
}
@keyframes badge-bounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}
.header-avatar {
  width: 34px; height: 34px; border-radius: 50%;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-warm));
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 13px; position: relative;
}
.status-ring {
  position: absolute; inset: -3px; border-radius: 50%;
  border: 2px solid var(--success);
}

/* ========== Main ========== */
.main {
  margin-left: var(--sidebar-width); margin-top: var(--header-height);
  padding: 32px 28px 60px;
  min-height: calc(100vh - var(--header-height));
}

/* ========== Glass Card ========== */
.glass-card {
  background: rgba(19,19,22,0.6); backdrop-filter: blur(12px);
  border: 1px solid var(--border); border-radius: var(--radius-card);
  transition: all 0.3s ease;
}
.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 32px rgba(0,0,0,0.3);
  border-color: rgba(139,92,246,0.2);
}

/* ========== Hero ========== */
.hero-section {
  position: relative; padding: 48px 40px; border-radius: var(--radius-card);
  overflow: hidden; margin-bottom: 28px; border: 1px solid var(--border);
}
.mesh-bg {
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 600px 400px at 15% 50%, rgba(139,92,246,0.12) 0%, transparent 70%),
    radial-gradient(ellipse 500px 350px at 80% 20%, rgba(6,182,212,0.08) 0%, transparent 70%),
    radial-gradient(ellipse 400px 300px at 60% 80%, rgba(249,115,22,0.06) 0%, transparent 70%);
  animation: mesh-drift 20s ease-in-out infinite alternate;
  z-index: 0;
}
@keyframes mesh-drift {
  0% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(10px, -10px) scale(1.02); }
  66% { transform: translate(-5px, 5px) scale(0.98); }
  100% { transform: translate(5px, -5px) scale(1.01); }
}
.hero-section > * { position: relative; z-index: 1; }

/* ========== Sparkline ========== */
.sparkline-glow { transition: filter 0.3s ease; }
.glass-card:hover .sparkline-glow { filter: drop-shadow(0 0 6px rgba(139,92,246,0.4)); }

/* ========== Chart Animations ========== */
@keyframes draw-line {
  from { stroke-dashoffset: 1200; }
  to { stroke-dashoffset: 0; }
}
.chart-line-animated {
  stroke-dasharray: 1200;
  stroke-dashoffset: 1200;
  animation: draw-line 2s ease forwards;
}
.donut-segment { transition: all 0.3s ease; cursor: pointer; }
.donut-segment:hover { filter: brightness(1.2); }

/* ========== Table ========== */
.data-table { width: 100%; border-collapse: collapse; }
.data-table th {
  text-align: left; padding: 12px 16px;
  font-size: 12px; font-weight: 600; color: var(--text-secondary);
  text-transform: uppercase; letter-spacing: 0.5px;
  border-bottom: 1px solid var(--border); cursor: pointer; user-select: none;
}
.data-table th:hover { color: var(--text-primary); }
.data-table td {
  padding: 14px 16px; font-size: 14px;
  border-bottom: 1px solid rgba(39,39,42,0.5);
}
.data-table tr:nth-child(even) td { background: rgba(19,19,22,0.3); }
.data-table tr:hover td { background: var(--surface-elevated); }

.status-pill {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 4px 12px; border-radius: var(--radius-pill);
  font-size: 12px; font-weight: 600;
}
.status-pill.success { background: rgba(34,197,94,0.1); color: var(--success); }
.status-pill.warning { background: rgba(234,179,8,0.1); color: var(--warning); }
.status-pill.error { background: rgba(239,68,68,0.1); color: var(--error); }
.status-pill .dot { width: 6px; height: 6px; border-radius: 50%; }
.status-pill.success .dot { background: var(--success); }
.status-pill.warning .dot { background: var(--warning); }
.status-pill.error .dot { background: var(--error); }

/* ========== Tabs ========== */
.tab-group { display: flex; gap: 4px; }
.tab-btn {
  padding: 8px 16px; border-radius: var(--radius-btn);
  font-size: 13px; font-weight: 500; color: var(--text-secondary);
  background: transparent; border: none; cursor: pointer; transition: all 0.2s;
}
.tab-btn:hover { color: var(--text-primary); background: var(--surface-elevated); }
.tab-btn.active { color: var(--text-primary); background: var(--surface-elevated); }

/* ========== Progress Ring ========== */
.progress-ring-circle {
  transition: stroke-dashoffset 1.5s ease;
  transform: rotate(-90deg); transform-origin: center;
}

/* ========== Command Palette ========== */
.cmd-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
  z-index: 100; display: none;
  align-items: flex-start; justify-content: center; padding-top: 15vh;
}
.cmd-overlay.open { display: flex; }
.cmd-modal {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius-card); width: 560px; max-height: 480px;
  overflow: hidden; display: flex; flex-direction: column;
  animation: cmd-enter 0.2s ease;
  box-shadow: 0 24px 64px rgba(0,0,0,0.5);
}
@keyframes cmd-enter {
  from { opacity: 0; transform: scale(0.95) translateY(-10px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}
.cmd-input {
  width: 100%; padding: 16px 20px; background: transparent;
  border: none; border-bottom: 1px solid var(--border);
  color: var(--text-primary); font-size: 16px; outline: none; font-family: inherit;
}
.cmd-input::placeholder { color: var(--text-secondary); }
.cmd-results { overflow-y: auto; padding: 8px; flex: 1; }
.cmd-section-title {
  font-size: 11px; font-weight: 600; color: var(--text-secondary);
  text-transform: uppercase; letter-spacing: 0.5px; padding: 12px 12px 6px;
}
.cmd-item {
  display: flex; align-items: center; gap: 12px;
  padding: 10px 12px; border-radius: var(--radius-btn);
  cursor: pointer; transition: all 0.15s;
  color: var(--text-secondary); font-size: 14px;
}
.cmd-item:hover, .cmd-item.highlighted { background: var(--surface-elevated); color: var(--text-primary); }
.cmd-item .shortcut {
  margin-left: auto; font-size: 11px; padding: 2px 6px;
  border-radius: 4px; background: var(--surface-hover);
  border: 1px solid var(--border); color: var(--text-secondary);
}

/* ========== Settings Panel ========== */
.settings-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.4);
  z-index: 50; display: none;
}
.settings-overlay.open { display: block; }
.settings-panel {
  position: fixed; top: 0; right: -400px;
  width: 380px; height: 100vh;
  background: var(--surface); border-left: 1px solid var(--border);
  z-index: 55; display: flex; flex-direction: column;
  transition: right 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  overflow-y: auto;
}
.settings-panel.open { right: 0; }

.toggle-switch {
  position: relative; width: 44px; height: 24px;
  background: var(--surface-hover); border-radius: 12px;
  cursor: pointer; transition: background 0.2s; flex-shrink: 0;
}
.toggle-switch.on { background: var(--accent-primary); }
.toggle-switch::after {
  content: ''; position: absolute; width: 18px; height: 18px;
  background: white; border-radius: 50%; top: 3px; left: 3px;
  transition: transform 0.2s;
}
.toggle-switch.on::after { transform: translateX(20px); }

/* ========== Toast ========== */
.toast-container {
  position: fixed; bottom: 24px; right: 24px; z-index: 200;
  display: flex; flex-direction: column; gap: 8px;
}
.toast {
  display: flex; align-items: center; gap: 12px;
  padding: 14px 20px; border-radius: var(--radius-btn);
  background: var(--surface-elevated); border: 1px solid var(--border);
  font-size: 14px; color: var(--text-primary);
  box-shadow: 0 8px 24px rgba(0,0,0,0.3);
  animation: toast-in 0.35s ease; min-width: 300px;
}
.toast.leaving { animation: toast-out 0.3s ease forwards; }
@keyframes toast-in { from { opacity: 0; transform: translateX(40px); } to { opacity: 1; transform: translateX(0); } }
@keyframes toast-out { from { opacity: 1; transform: translateX(0); } to { opacity: 0; transform: translateX(40px); } }
.toast-close { cursor: pointer; color: var(--text-secondary); margin-left: auto; }
.toast-close:hover { color: var(--text-primary); }

/* ========== Scroll Reveal ========== */
.reveal { opacity: 0; transform: translateY(20px); transition: all 0.6s ease; }
.reveal.visible { opacity: 1; transform: translateY(0); }

/* ========== Custom Checkbox ========== */
.custom-checkbox {
  width: 16px; height: 16px; border-radius: 4px;
  border: 2px solid var(--border); cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s; flex-shrink: 0;
}
.custom-checkbox:hover { border-color: var(--accent-primary); }
.custom-checkbox.checked { background: var(--accent-primary); border-color: var(--accent-primary); }
.custom-checkbox.checked::after {
  content: ''; display: block; width: 6px; height: 10px;
  border: solid white; border-width: 0 2px 2px 0;
  transform: rotate(45deg) translateY(-1px);
}

/* ========== Horizontal Bar ========== */
.h-bar-track { height: 8px; background: var(--surface-elevated); border-radius: 4px; overflow: hidden; }
.h-bar-fill { height: 100%; border-radius: 4px; transition: width 1.5s ease; }

/* ========== Footer Gradient ========== */
.footer-gradient {
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--accent-primary), var(--accent-secondary), transparent);
}

/* ========== Misc ========== */
.ws-dropdown {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 16px; border-radius: var(--radius-btn);
  cursor: pointer; transition: background 0.2s;
}
.ws-dropdown:hover { background: var(--surface-elevated); }
.activity-avatar {
  width: 36px; height: 36px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 13px; flex-shrink: 0;
}
.search-input {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius-btn); padding: 8px 14px 8px 36px;
  color: var(--text-primary); font-size: 13px; outline: none;
  font-family: inherit; transition: border-color 0.2s; width: 240px;
}
.search-input:focus { border-color: var(--accent-primary); }
.search-input::placeholder { color: var(--text-secondary); }
.integration-card {
  display: flex; align-items: center; gap: 14px; padding: 14px;
  border-radius: var(--radius-btn); border: 1px solid var(--border);
  background: var(--surface); transition: all 0.2s;
}
.integration-card:hover { border-color: var(--accent-primary); }
.chart-tooltip {
  position: absolute; padding: 8px 12px;
  background: var(--surface-elevated); border: 1px solid var(--border);
  border-radius: var(--radius-btn); font-size: 12px; color: var(--text-primary);
  pointer-events: none; white-space: nowrap;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 10; display: none;
}
.online-dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--success); border: 2px solid var(--sidebar-bg);
}
.settings-input {
  width: 100%; padding: 10px 14px;
  background: var(--surface-elevated); border: 1px solid var(--border);
  border-radius: var(--radius-btn); color: var(--text-primary);
  font-size: 14px; outline: none; font-family: inherit;
}
.settings-input:focus { border-color: var(--accent-primary); }
</style>
</head>
<body>

<!-- ==================== SIDEBAR ==================== -->
<aside class="sidebar noise-bg" id="sidebar">
  <div style="padding: 20px 16px 12px;">
    <div class="ws-dropdown" id="workspace-toggle">
      <div style="width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;">P</div>
      <div style="flex:1;">
        <div style="font-size:14px;font-weight:600;color:var(--text-primary);">Prism Team</div>
        <div style="font-size:11px;color:var(--text-secondary);">Pro Plan</div>
      </div>
      <i data-lucide="chevrons-up-down" style="width:16px;height:16px;color:var(--text-secondary);"></i>
    </div>
  </div>

  <div style="padding: 0 12px; flex:1;">
    <div style="font-size:11px;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;padding:16px 16px 8px;">Main</div>
    <div class="nav-item active" data-nav="overview" onclick="switchNav(this)">
      <i data-lucide="layout-dashboard" style="width:18px;height:18px;"></i>
      Overview
      <span class="nav-dot"></span>
    </div>
    <div class="nav-item" data-nav="analytics" onclick="switchNav(this)">
      <i data-lucide="bar-chart-3" style="width:18px;height:18px;"></i>
      Analytics
      <span class="nav-dot"></span>
    </div>
    <div class="nav-item" data-nav="customers" onclick="switchNav(this)">
      <i data-lucide="users" style="width:18px;height:18px;"></i>
      Customers
      <span class="nav-dot"></span>
    </div>
    <div class="nav-item" data-nav="revenue" onclick="switchNav(this)">
      <i data-lucide="wallet" style="width:18px;height:18px;"></i>
      Revenue
      <span class="nav-dot"></span>
    </div>

    <div style="font-size:11px;font-weight:600;color:var(--text-secondary);text-transform:uppercase;letter-spacing:0.5px;padding:24px 16px 8px;">Manage</div>
    <div class="nav-item" data-nav="products" onclick="switchNav(this)">
      <i data-lucide="package" style="width:18px;height:18px;"></i>
      Products
      <span class="nav-dot"></span>
    </div>
    <div class="nav-item" data-nav="settings" onclick="openSettings()">
      <i data-lucide="settings" style="width:18px;height:18px;"></i>
      Settings
      <span class="nav-dot"></span>
    </div>
  </div>

  <!-- User Section at Bottom -->
  <div style="padding:16px;border-top:1px solid var(--border);">
    <div style="display:flex;align-items:center;gap:12px;">
      <div style="position:relative;">
        <div style="width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--accent-primary),var(--accent-warm));display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;">RC</div>
        <div class="online-dot" style="position:absolute;bottom:0;right:0;"></div>
      </div>
      <div style="flex:1;min-width:0;">
        <div style="font-size:14px;font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">Rafael Costa</div>
        <div style="font-size:12px;color:var(--text-secondary);">Admin</div>
      </div>
      <i data-lucide="log-out" style="width:16px;height:16px;color:var(--text-secondary);cursor:pointer;" title="Log out"></i>
    </div>
  </div>
</aside>

<!-- ==================== HEADER ==================== -->
<header class="header">
  <div style="display:flex;align-items:center;gap:16px;">
    <nav class="breadcrumb">
      <span>Dashboard</span>
      <span style="color:var(--border);">/</span>
      <span class="current">Overview</span>
    </nav>
  </div>
  <div style="display:flex;align-items:center;gap:14px;">
    <button class="cmd-k-btn" onclick="openCommandPalette()">
      <i data-lucide="search" style="width:14px;height:14px;"></i>
      Search...
      <kbd>&#8984;K</kbd>
    </button>
    <div class="notif-bell" onclick="showToast('3 new notifications','info')">
      <i data-lucide="bell" style="width:20px;height:20px;"></i>
      <span class="notif-badge">3</span>
    </div>
    <button class="gradient-border-btn" onclick="showToast('Report created successfully','success')">
      <span style="display:flex;align-items:center;gap:6px;">
        <i data-lucide="plus" style="width:14px;height:14px;"></i> New Report
      </span>
    </button>
    <div class="header-avatar">
      <span class="status-ring"></span>
      RC
    </div>
  </div>
</header>

<!-- ==================== MAIN CONTENT ==================== -->
<main class="main" id="mainContent">

  <!-- ===== Hero Dashboard ===== -->
  <section class="hero-section">
    <div class="mesh-bg"></div>
    <div style="display:flex;justify-content:space-between;align-items:flex-start;">
      <div>
        <h1 style="font-size:40px;font-weight:400;margin-bottom:8px;letter-spacing:-0.5px;">Welcome back, Rafael</h1>
        <p style="color:var(--text-secondary);font-size:16px;max-width:500px;line-height:1.6;">
          Revenue is trending <span style="color:var(--success);font-weight:600;">12% above forecast</span> this quarter. Your team shipped 3 features last week.
        </p>
      </div>
      <div style="text-align:right;color:var(--text-secondary);font-size:14px;">
        <div id="currentDate" style="font-size:16px;color:var(--text-primary);font-weight:500;"></div>
        <div id="currentTime" style="font-size:28px;font-family:'Instrument Serif',serif;color:var(--text-primary);margin-top:4px;"></div>
      </div>
    </div>
  </section>

  <!-- ===== KPI Cards ===== -->
  <section class="reveal" style="display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:28px;">
    <!-- Revenue Card -->
    <div class="glass-card" style="padding:24px;">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
        <div style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,rgba(139,92,246,0.2),rgba(6,182,212,0.2));display:flex;align-items:center;justify-content:center;">
          <i data-lucide="dollar-sign" style="width:20px;height:20px;color:var(--accent-primary);"></i>
        </div>
        <span style="display:flex;align-items:center;gap:4px;font-size:13px;color:var(--success);font-weight:600;">
          <i data-lucide="trending-up" style="width:14px;height:14px;"></i> +12.5%
        </span>
      </div>
      <div class="count-up" data-target="48234" data-prefix="$" data-decimals="0" style="font-size:32px;font-weight:700;letter-spacing:-1px;margin-bottom:4px;">$0</div>
      <div style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;">Total Revenue</div>
      <svg width="100%" height="40" class="sparkline-glow" viewBox="0 0 200 40" preserveAspectRatio="none">
        <defs><linearGradient id="spark1" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#8B5CF6" stop-opacity="0.3"/><stop offset="100%" stop-color="#8B5CF6" stop-opacity="0"/></linearGradient></defs>
        <path d="M0,35 L20,28 L40,30 L60,20 L80,22 L100,15 L120,18 L140,10 L160,12 L180,5 L200,8" fill="none" stroke="#8B5CF6" stroke-width="2"/>
        <path d="M0,35 L20,28 L40,30 L60,20 L80,22 L100,15 L120,18 L140,10 L160,12 L180,5 L200,8 L200,40 L0,40 Z" fill="url(#spark1)"/>
      </svg>
    </div>
    <!-- Users Card -->
    <div class="glass-card" style="padding:24px;">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
        <div style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,rgba(6,182,212,0.2),rgba(34,197,94,0.2));display:flex;align-items:center;justify-content:center;">
          <i data-lucide="users" style="width:20px;height:20px;color:var(--accent-secondary);"></i>
        </div>
        <span style="display:flex;align-items:center;gap:4px;font-size:13px;color:var(--success);font-weight:600;">
          <i data-lucide="trending-up" style="width:14px;height:14px;"></i> +8.3%
        </span>
      </div>
      <div class="count-up" data-target="2847" data-prefix="" data-decimals="0" style="font-size:32px;font-weight:700;letter-spacing:-1px;margin-bottom:4px;">0</div>
      <div style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;">Active Users</div>
      <svg width="100%" height="40" class="sparkline-glow" viewBox="0 0 200 40" preserveAspectRatio="none">
        <defs><linearGradient id="spark2" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#06B6D4" stop-opacity="0.3"/><stop offset="100%" stop-color="#06B6D4" stop-opacity="0"/></linearGradient></defs>
        <path d="M0,30 L20,25 L40,28 L60,18 L80,20 L100,12 L120,15 L140,10 L160,8 L180,5 L200,7" fill="none" stroke="#06B6D4" stroke-width="2"/>
        <path d="M0,30 L20,25 L40,28 L60,18 L80,20 L100,12 L120,15 L140,10 L160,8 L180,5 L200,7 L200,40 L0,40 Z" fill="url(#spark2)"/>
      </svg>
    </div>
    <!-- Conversion Card -->
    <div class="glass-card" style="padding:24px;">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
        <div style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,rgba(249,115,22,0.2),rgba(234,179,8,0.2));display:flex;align-items:center;justify-content:center;">
          <i data-lucide="percent" style="width:20px;height:20px;color:var(--accent-warm);"></i>
        </div>
        <span style="display:flex;align-items:center;gap:4px;font-size:13px;color:var(--error);font-weight:600;">
          <i data-lucide="trending-down" style="width:14px;height:14px;"></i> -0.4%
        </span>
      </div>
      <div class="count-up" data-target="3.24" data-prefix="" data-decimals="2" data-suffix="%" style="font-size:32px;font-weight:700;letter-spacing:-1px;margin-bottom:4px;">0%</div>
      <div style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;">Conversion Rate</div>
      <svg width="100%" height="40" class="sparkline-glow" viewBox="0 0 200 40" preserveAspectRatio="none">
        <defs><linearGradient id="spark3" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#F97316" stop-opacity="0.3"/><stop offset="100%" stop-color="#F97316" stop-opacity="0"/></linearGradient></defs>
        <path d="M0,10 L20,15 L40,12 L60,18 L80,20 L100,16 L120,22 L140,25 L160,20 L180,28 L200,24" fill="none" stroke="#F97316" stroke-width="2"/>
        <path d="M0,10 L20,15 L40,12 L60,18 L80,20 L100,16 L120,22 L140,25 L160,20 L180,28 L200,24 L200,40 L0,40 Z" fill="url(#spark3)"/>
      </svg>
    </div>
    <!-- NPS Card -->
    <div class="glass-card" style="padding:24px;">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
        <div style="width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,rgba(34,197,94,0.2),rgba(6,182,212,0.2));display:flex;align-items:center;justify-content:center;">
          <i data-lucide="heart" style="width:20px;height:20px;color:var(--success);"></i>
        </div>
        <span style="display:flex;align-items:center;gap:4px;font-size:13px;color:var(--success);font-weight:600;">
          <i data-lucide="trending-up" style="width:14px;height:14px;"></i> +5
        </span>
      </div>
      <div class="count-up" data-target="72" data-prefix="" data-decimals="0" style="font-size:32px;font-weight:700;letter-spacing:-1px;margin-bottom:4px;">0</div>
      <div style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;">NPS Score</div>
      <svg width="100%" height="40" class="sparkline-glow" viewBox="0 0 200 40" preserveAspectRatio="none">
        <defs><linearGradient id="spark4" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#22C55E" stop-opacity="0.3"/><stop offset="100%" stop-color="#22C55E" stop-opacity="0"/></linearGradient></defs>
        <path d="M0,32 L20,28 L40,25 L60,22 L80,20 L100,18 L120,15 L140,12 L160,10 L180,8 L200,5" fill="none" stroke="#22C55E" stroke-width="2"/>
        <path d="M0,32 L20,28 L40,25 L60,22 L80,20 L100,18 L120,15 L140,12 L160,10 L180,8 L200,5 L200,40 L0,40 Z" fill="url(#spark4)"/>
      </svg>
    </div>
  </section>

  <!-- ===== Charts Section ===== -->
  <section class="reveal" style="display:grid;grid-template-columns:3fr 2fr;gap:20px;margin-bottom:28px;">
    <!-- Revenue Trends Line Chart -->
    <div class="glass-card" style="padding:24px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;">
        <div>
          <h3 style="font-size:20px;font-weight:400;margin-bottom:4px;">Revenue Trends</h3>
          <p style="font-size:13px;color:var(--text-secondary);">Monthly revenue over the past year</p>
        </div>
        <div class="tab-group">
          <button class="tab-btn active">12M</button>
          <button class="tab-btn">6M</button>
          <button class="tab-btn">3M</button>
        </div>
      </div>
      <div style="position:relative;height:260px;" id="lineChartContainer">
        <svg width="100%" height="100%" viewBox="0 0 640 260" preserveAspectRatio="xMidYMid meet" id="lineChart">
          <defs>
            <linearGradient id="lineGrad" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="#8B5CF6" stop-opacity="0.25"/>
              <stop offset="100%" stop-color="#8B5CF6" stop-opacity="0.01"/>
            </linearGradient>
          </defs>
          <!-- Grid lines -->
          <line x1="60" y1="20" x2="620" y2="20" stroke="#27272A" stroke-width="0.5" stroke-dasharray="4,4"/>
          <line x1="60" y1="70" x2="620" y2="70" stroke="#27272A" stroke-width="0.5" stroke-dasharray="4,4"/>
          <line x1="60" y1="120" x2="620" y2="120" stroke="#27272A" stroke-width="0.5" stroke-dasharray="4,4"/>
          <line x1="60" y1="170" x2="620" y2="170" stroke="#27272A" stroke-width="0.5" stroke-dasharray="4,4"/>
          <line x1="60" y1="220" x2="620" y2="220" stroke="#27272A" stroke-width="0.5" stroke-dasharray="4,4"/>
          <!-- Y-axis labels -->
          <text x="50" y="24" text-anchor="end" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">$50k</text>
          <text x="50" y="74" text-anchor="end" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">$40k</text>
          <text x="50" y="124" text-anchor="end" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">$30k</text>
          <text x="50" y="174" text-anchor="end" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">$20k</text>
          <text x="50" y="224" text-anchor="end" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">$10k</text>
          <!-- X-axis labels -->
          <text x="83" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Mar</text>
          <text x="130" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Apr</text>
          <text x="177" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">May</text>
          <text x="224" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Jun</text>
          <text x="271" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Jul</text>
          <text x="318" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Aug</text>
          <text x="365" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Sep</text>
          <text x="412" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Oct</text>
          <text x="459" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Nov</text>
          <text x="506" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Dec</text>
          <text x="553" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Jan</text>
          <text x="600" y="248" text-anchor="middle" fill="#A1A1AA" font-size="11" font-family="Inter,sans-serif">Feb</text>
          <!-- Area fill under line -->
          <path d="M83,180 L130,160 L177,170 L224,130 L271,140 L318,100 L365,110 L412,80 L459,70 L506,50 L553,60 L600,40 L600,220 L83,220 Z" fill="url(#lineGrad)"/>
          <!-- Animated line -->
          <path d="M83,180 L130,160 L177,170 L224,130 L271,140 L318,100 L365,110 L412,80 L459,70 L506,50 L553,60 L600,40" fill="none" stroke="#8B5CF6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="chart-line-animated"/>
          <!-- Data dots -->
          <circle cx="83" cy="180" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$22,000"/>
          <circle cx="130" cy="160" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$26,000"/>
          <circle cx="177" cy="170" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$24,000"/>
          <circle cx="224" cy="130" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$32,000"/>
          <circle cx="271" cy="140" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$30,000"/>
          <circle cx="318" cy="100" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$38,000"/>
          <circle cx="365" cy="110" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$36,000"/>
          <circle cx="412" cy="80" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$42,000"/>
          <circle cx="459" cy="70" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$44,000"/>
          <circle cx="506" cy="50" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$48,000"/>
          <circle cx="553" cy="60" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$46,000"/>
          <circle cx="600" cy="40" r="4" fill="#131316" stroke="#8B5CF6" stroke-width="2" class="chart-dot" data-val="$50,000"/>
        </svg>
        <div class="chart-tooltip" id="lineTooltip"></div>
      </div>
    </div>

    <!-- Donut Chart -->
    <div class="glass-card" style="padding:24px;">
      <div style="margin-bottom:24px;">
        <h3 style="font-size:20px;font-weight:400;margin-bottom:4px;">Traffic Distribution</h3>
        <p style="font-size:13px;color:var(--text-secondary);">Sources breakdown this quarter</p>
      </div>
      <div style="display:flex;justify-content:center;position:relative;margin-bottom:24px;">
        <svg width="200" height="200" viewBox="0 0 200 200" id="donutChart">
          <defs>
            <linearGradient id="seg1" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#8B5CF6"/><stop offset="100%" stop-color="#A78BFA"/></linearGradient>
            <linearGradient id="seg2" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#06B6D4"/><stop offset="100%" stop-color="#22D3EE"/></linearGradient>
            <linearGradient id="seg3" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#F97316"/><stop offset="100%" stop-color="#FB923C"/></linearGradient>
            <linearGradient id="seg4" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#22C55E"/><stop offset="100%" stop-color="#4ADE80"/></linearGradient>
          </defs>
          <!-- circumference = 2*PI*70 = 439.82 -->
          <circle cx="100" cy="100" r="70" fill="none" stroke="url(#seg1)" stroke-width="28" stroke-dasharray="175.93 263.89" stroke-dashoffset="0" class="donut-segment" transform="rotate(-90 100 100)"/>
          <circle cx="100" cy="100" r="70" fill="none" stroke="url(#seg2)" stroke-width="28" stroke-dasharray="109.96 329.86" stroke-dashoffset="-175.93" class="donut-segment" transform="rotate(-90 100 100)"/>
          <circle cx="100" cy="100" r="70" fill="none" stroke="url(#seg3)" stroke-width="28" stroke-dasharray="87.96 351.86" stroke-dashoffset="-285.89" class="donut-segment" transform="rotate(-90 100 100)"/>
          <circle cx="100" cy="100" r="70" fill="none" stroke="url(#seg4)" stroke-width="28" stroke-dasharray="65.97 373.85" stroke-dashoffset="-373.85" class="donut-segment" transform="rotate(-90 100 100)"/>
          <!-- Center text -->
          <text x="100" y="94" text-anchor="middle" fill="#FAFAFA" font-size="28" font-weight="700" font-family="Inter,sans-serif">24.5k</text>
          <text x="100" y="114" text-anchor="middle" fill="#A1A1AA" font-size="12" font-family="Inter,sans-serif">Total visits</text>
        </svg>
      </div>
      <!-- Legend -->
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
        <div style="display:flex;align-items:center;gap:8px;font-size:13px;">
          <div style="width:10px;height:10px;border-radius:50%;background:#8B5CF6;"></div>
          <span style="color:var(--text-secondary);">Organic</span>
          <span style="margin-left:auto;font-weight:600;">40%</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px;font-size:13px;">
          <div style="width:10px;height:10px;border-radius:50%;background:#06B6D4;"></div>
          <span style="color:var(--text-secondary);">Direct</span>
          <span style="margin-left:auto;font-weight:600;">25%</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px;font-size:13px;">
          <div style="width:10px;height:10px;border-radius:50%;background:#F97316;"></div>
          <span style="color:var(--text-secondary);">Referral</span>
          <span style="margin-left:auto;font-weight:600;">20%</span>
        </div>
        <div style="display:flex;align-items:center;gap:8px;font-size:13px;">
          <div style="width:10px;height:10px;border-radius:50%;background:#22C55E;"></div>
          <span style="color:var(--text-secondary);">Social</span>
          <span style="margin-left:auto;font-weight:600;">15%</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Data Table ===== -->
  <section class="reveal" style="margin-bottom:28px;">
    <div class="glass-card" style="padding:0;overflow:hidden;">
      <div style="padding:24px 24px 0;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
          <h3 style="font-size:20px;font-weight:400;">Recent Transactions</h3>
          <div style="position:relative;">
            <i data-lucide="search" style="width:14px;height:14px;position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary);"></i>
            <input type="text" placeholder="Search transactions..." class="search-input" id="tableSearch" oninput="filterTable()"/>
          </div>
        </div>
        <div class="tab-group" style="margin-bottom:16px;" id="tableTabs">
          <button class="tab-btn active" onclick="filterTableTab(this,'all')">All <span style="color:var(--text-secondary);font-size:12px;">(124)</span></button>
          <button class="tab-btn" onclick="filterTableTab(this,'Completed')">Successful <span style="color:var(--text-secondary);font-size:12px;">(98)</span></button>
          <button class="tab-btn" onclick="filterTableTab(this,'Pending')">Pending <span style="color:var(--text-secondary);font-size:12px;">(18)</span></button>
          <button class="tab-btn" onclick="filterTableTab(this,'Failed')">Failed <span style="color:var(--text-secondary);font-size:12px;">(8)</span></button>
        </div>
      </div>
      <div style="overflow-x:auto;">
        <table class="data-table" id="transactionsTable">
          <thead>
            <tr>
              <th style="width:40px;padding-left:24px;"><div class="custom-checkbox" id="selectAll" onclick="toggleSelectAll()"></div></th>
              <th onclick="sortTable(1)">Transaction ID <i data-lucide="arrow-up-down" style="width:12px;height:12px;display:inline;vertical-align:middle;opacity:0.5;"></i></th>
              <th onclick="sortTable(2)">Customer <i data-lucide="arrow-up-down" style="width:12px;height:12px;display:inline;vertical-align:middle;opacity:0.5;"></i></th>
              <th onclick="sortTable(3)">Amount <i data-lucide="arrow-up-down" style="width:12px;height:12px;display:inline;vertical-align:middle;opacity:0.5;"></i></th>
              <th>Status</th>
              <th onclick="sortTable(5)">Date <i data-lucide="arrow-up-down" style="width:12px;height:12px;display:inline;vertical-align:middle;opacity:0.5;"></i></th>
              <th style="width:40px;"></th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
      <div style="padding:16px 24px;display:flex;justify-content:space-between;align-items:center;border-top:1px solid var(--border);">
        <span style="font-size:13px;color:var(--text-secondary);">Showing 1-10 of 124</span>
        <div style="display:flex;gap:4px;">
          <button style="padding:6px 10px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text-secondary);font-size:13px;cursor:pointer;" disabled>&laquo; Prev</button>
          <button style="padding:6px 12px;border-radius:6px;border:1px solid var(--accent-primary);background:rgba(139,92,246,0.1);color:var(--accent-primary);font-size:13px;font-weight:600;cursor:pointer;">1</button>
          <button style="padding:6px 12px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text-secondary);font-size:13px;cursor:pointer;">2</button>
          <button style="padding:6px 12px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text-secondary);font-size:13px;cursor:pointer;">3</button>
          <button style="padding:6px 12px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text-secondary);font-size:13px;cursor:pointer;">...</button>
          <button style="padding:6px 12px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text-secondary);font-size:13px;cursor:pointer;">13</button>
          <button style="padding:6px 10px;border-radius:6px;border:1px solid var(--border);background:var(--surface);color:var(--text-secondary);font-size:13px;cursor:pointer;">Next &raquo;</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== Activity Feed + Notifications Panel ===== -->
  <section class="reveal" style="display:grid;grid-template-columns:3fr 2fr;gap:20px;margin-bottom:28px;">
    <!-- Activity Feed -->
    <div class="glass-card" style="padding:24px;">
      <h3 style="font-size:20px;font-weight:400;margin-bottom:20px;">Activity Feed</h3>
      <div id="activityFeed" style="display:flex;flex-direction:column;gap:4px;"></div>
    </div>
    <!-- Notifications Panel -->
    <div class="glass-card" style="padding:24px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
        <h3 style="font-size:20px;font-weight:400;">Notifications</h3>
        <button style="font-size:12px;color:var(--accent-primary);background:none;border:none;cursor:pointer;font-weight:600;" onclick="showToast('All notifications marked as read','success')">Mark all as read</button>
      </div>
      <div class="tab-group" style="margin-bottom:16px;" id="notifTabs">
        <button class="tab-btn active" onclick="switchNotifTab(this,'all')">All</button>
        <button class="tab-btn" onclick="switchNotifTab(this,'mentions')">Mentions</button>
        <button class="tab-btn" onclick="switchNotifTab(this,'system')">System</button>
      </div>
      <div id="notifList" style="display:flex;flex-direction:column;gap:12px;"></div>
    </div>
  </section>

  <!-- ===== Analytics Deep Dive ===== -->
  <section class="reveal" style="margin-bottom:28px;">
    <div style="margin-bottom:20px;">
      <h2 style="font-size:28px;font-weight:400;margin-bottom:6px;">Performance Insights</h2>
      <p style="font-size:14px;color:var(--text-secondary);">Deep dive into your key metrics and growth areas</p>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:20px;margin-bottom:20px;">
      <!-- Top Products -->
      <div class="glass-card" style="padding:24px;">
        <h4 style="font-size:16px;font-weight:600;margin-bottom:20px;">Top Products</h4>
        <div style="display:flex;flex-direction:column;gap:14px;" id="topProducts"></div>
      </div>
      <!-- Revenue by Region -->
      <div class="glass-card" style="padding:24px;">
        <h4 style="font-size:16px;font-weight:600;margin-bottom:20px;">Revenue by Region</h4>
        <div style="display:flex;flex-direction:column;gap:16px;" id="regionBars"></div>
      </div>
      <!-- Goal Completion -->
      <div class="glass-card" style="padding:24px;">
        <h4 style="font-size:16px;font-weight:600;margin-bottom:20px;">Goal Completion</h4>
        <div style="display:flex;flex-direction:column;gap:20px;" id="goalRings"></div>
      </div>
    </div>
    <!-- Insight Card -->
    <div class="glass-card" style="padding:28px;text-align:center;">
      <p style="font-family:'Instrument Serif',serif;font-style:italic;font-size:20px;color:var(--text-secondary);line-height:1.6;max-width:640px;margin:0 auto;">
        "SaaS Pro and Analytics Suite together account for 68% of total revenue, with SaaS Pro growing at 2x the rate of other products this quarter."
      </p>
    </div>
  </section>

  <!-- ===== Footer ===== -->
  <footer style="margin-top:48px;">
    <div class="footer-gradient"></div>
    <div style="padding:20px 0;text-align:center;font-size:13px;color:var(--text-secondary);">
      Prism Analytics v3.1 &middot; Built with Skill C: Anthropic Frontend Design &middot; Feb 2026
    </div>
  </footer>
</main>

<!-- ==================== COMMAND PALETTE MODAL ==================== -->
<div class="cmd-overlay" id="cmdOverlay" onclick="closeCommandPalette(event)">
  <div class="cmd-modal" onclick="event.stopPropagation()">
    <input type="text" class="cmd-input" placeholder="Type a command or search..." id="cmdInput" oninput="filterCommands()" onkeydown="handleCmdKey(event)"/>
    <div class="cmd-results" id="cmdResults"></div>
  </div>
</div>

<!-- ==================== SETTINGS SLIDE PANEL ==================== -->
<div class="settings-overlay" id="settingsOverlay" onclick="closeSettings()"></div>
<div class="settings-panel" id="settingsPanel">
  <div style="padding:24px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;">
    <h3 style="font-size:20px;font-weight:400;">Settings</h3>
    <div style="cursor:pointer;color:var(--text-secondary);" onclick="closeSettings()"><i data-lucide="x" style="width:20px;height:20px;"></i></div>
  </div>
  <div class="tab-group" style="padding:16px 24px 0;" id="settingsTabs">
    <button class="tab-btn active" onclick="switchSettingsTab(this,'profile')">Profile</button>
    <button class="tab-btn" onclick="switchSettingsTab(this,'appearance')">Appearance</button>
    <button class="tab-btn" onclick="switchSettingsTab(this,'notifs')">Notifications</button>
    <button class="tab-btn" onclick="switchSettingsTab(this,'integrations')">Integrations</button>
  </div>
  <div style="padding:24px;flex:1;overflow-y:auto;">
    <!-- Profile Tab -->
    <div id="settingsProfile">
      <div style="display:flex;justify-content:center;margin-bottom:24px;">
        <div style="width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,var(--accent-primary),var(--accent-warm));display:flex;align-items:center;justify-content:center;font-size:28px;font-weight:700;cursor:pointer;position:relative;" title="Click to upload avatar">
          RC
          <div style="position:absolute;bottom:0;right:0;width:24px;height:24px;border-radius:50%;background:var(--surface-elevated);border:2px solid var(--border);display:flex;align-items:center;justify-content:center;">
            <i data-lucide="camera" style="width:12px;height:12px;color:var(--text-secondary);"></i>
          </div>
        </div>
      </div>
      <div style="margin-bottom:16px;">
        <label style="font-size:13px;color:var(--text-secondary);display:block;margin-bottom:6px;">Full Name</label>
        <input type="text" value="Rafael Costa" class="settings-input"/>
      </div>
      <div style="margin-bottom:16px;">
        <label style="font-size:13px;color:var(--text-secondary);display:block;margin-bottom:6px;">Email</label>
        <input type="email" value="rafael@prism.io" class="settings-input"/>
      </div>
      <div>
        <label style="font-size:13px;color:var(--text-secondary);display:block;margin-bottom:6px;">Role</label>
        <input type="text" value="Admin" class="settings-input" readonly style="opacity:0.6;"/>
      </div>
    </div>
    <!-- Appearance Tab -->
    <div id="settingsAppearance" style="display:none;">
      <div style="margin-bottom:24px;">
        <label style="font-size:13px;color:var(--text-secondary);display:block;margin-bottom:10px;">Theme</label>
        <div style="display:flex;gap:8px;">
          <button class="tab-btn active" style="flex:1;">Dark</button>
          <button class="tab-btn" style="flex:1;">Light</button>
          <button class="tab-btn" style="flex:1;">System</button>
        </div>
      </div>
      <div style="margin-bottom:24px;">
        <label style="font-size:13px;color:var(--text-secondary);display:block;margin-bottom:10px;">Accent Color</label>
        <div style="display:flex;gap:12px;">
          <div style="width:36px;height:36px;border-radius:50%;background:var(--accent-primary);cursor:pointer;border:3px solid var(--text-primary);"></div>
          <div style="width:36px;height:36px;border-radius:50%;background:var(--accent-secondary);cursor:pointer;border:3px solid transparent;"></div>
          <div style="width:36px;height:36px;border-radius:50%;background:var(--accent-warm);cursor:pointer;border:3px solid transparent;"></div>
        </div>
      </div>
      <div>
        <label style="font-size:13px;color:var(--text-secondary);display:block;margin-bottom:10px;">Font Size</label>
        <div style="display:flex;gap:8px;">
          <button class="tab-btn" style="flex:1;">Small</button>
          <button class="tab-btn active" style="flex:1;">Medium</button>
          <button class="tab-btn" style="flex:1;">Large</button>
        </div>
      </div>
    </div>
    <!-- Notifications Tab -->
    <div id="settingsNotifs" style="display:none;">
      <div style="display:flex;flex-direction:column;gap:20px;">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div><div style="font-size:14px;font-weight:500;">Email Notifications</div><div style="font-size:12px;color:var(--text-secondary);">Receive updates via email</div></div>
          <div class="toggle-switch on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div><div style="font-size:14px;font-weight:500;">Push Notifications</div><div style="font-size:12px;color:var(--text-secondary);">Browser push alerts</div></div>
          <div class="toggle-switch on" onclick="this.classList.toggle('on')"></div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div><div style="font-size:14px;font-weight:500;">Weekly Digest</div><div style="font-size:12px;color:var(--text-secondary);">Summary every Monday</div></div>
          <div class="toggle-switch" onclick="this.classList.toggle('on')"></div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div><div style="font-size:14px;font-weight:500;">Marketing</div><div style="font-size:12px;color:var(--text-secondary);">Product updates and tips</div></div>
          <div class="toggle-switch" onclick="this.classList.toggle('on')"></div>
        </div>
      </div>
    </div>
    <!-- Integrations Tab -->
    <div id="settingsIntegrations" style="display:none;">
      <div style="display:flex;flex-direction:column;gap:12px;">
        <div class="integration-card">
          <div style="width:36px;height:36px;border-radius:8px;background:#4A154B;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;color:white;">S</div>
          <div style="flex:1;"><div style="font-size:14px;font-weight:600;">Slack</div><div style="font-size:12px;color:var(--success);">Connected</div></div>
          <button style="padding:6px 14px;border-radius:6px;border:1px solid var(--border);background:var(--surface-elevated);color:var(--text-secondary);font-size:12px;cursor:pointer;">Disconnect</button>
        </div>
        <div class="integration-card">
          <div style="width:36px;height:36px;border-radius:8px;background:#24292E;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;color:white;">G</div>
          <div style="flex:1;"><div style="font-size:14px;font-weight:600;">GitHub</div><div style="font-size:12px;color:var(--success);">Connected</div></div>
          <button style="padding:6px 14px;border-radius:6px;border:1px solid var(--border);background:var(--surface-elevated);color:var(--text-secondary);font-size:12px;cursor:pointer;">Disconnect</button>
        </div>
        <div class="integration-card">
          <div style="width:36px;height:36px;border-radius:8px;background:#635BFF;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;color:white;">S</div>
          <div style="flex:1;"><div style="font-size:14px;font-weight:600;">Stripe</div><div style="font-size:12px;color:var(--success);">Active</div></div>
          <button style="padding:6px 14px;border-radius:6px;border:1px solid var(--border);background:var(--surface-elevated);color:var(--text-secondary);font-size:12px;cursor:pointer;">Disconnect</button>
        </div>
        <div class="integration-card">
          <div style="width:36px;height:36px;border-radius:8px;background:#000;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;color:white;">N</div>
          <div style="flex:1;"><div style="font-size:14px;font-weight:600;">Notion</div><div style="font-size:12px;color:var(--text-secondary);">Not connected</div></div>
          <button style="padding:6px 14px;border-radius:6px;border:1px solid var(--accent-primary);background:rgba(139,92,246,0.1);color:var(--accent-primary);font-size:12px;font-weight:600;cursor:pointer;">Connect</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ==================== TOAST CONTAINER ==================== -->
<div class="toast-container" id="toastContainer"></div>

<!-- ==================== JAVASCRIPT ==================== -->
<script>
// ===================================================================
// INITIALIZATION
// ===================================================================
document.addEventListener('DOMContentLoaded', function() {
  lucide.createIcons();
  initDateTime();
  initCountUp();
  initTable();
  initActivityFeed();
  initNotifications();
  initCommandPalette();
  initTopProducts();
  initRegionBars();
  initGoalRings();
  initChartTooltips();
  initScrollReveal();
  // Show welcome toast after brief delay
  setTimeout(function() { showToast('Dashboard synced 2 minutes ago', 'info'); }, 1500);
});

// ===================================================================
// DATE & TIME
// ===================================================================
function initDateTime() {
  function update() {
    var now = new Date();
    var dateEl = document.getElementById('currentDate');
    var timeEl = document.getElementById('currentTime');
    if (dateEl) dateEl.textContent = now.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' });
    if (timeEl) timeEl.textContent = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
  }
  update();
  setInterval(update, 30000);
}

// ===================================================================
// COUNT UP ANIMATION
// ===================================================================
function initCountUp() {
  var counters = document.querySelectorAll('.count-up');
  var observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        var el = entry.target;
        var target = parseFloat(el.dataset.target);
        var prefix = el.dataset.prefix || '';
        var suffix = el.dataset.suffix || '';
        var decimals = parseInt(el.dataset.decimals) || 0;
        var duration = 2000;
        var startTime = performance.now();
        function animate(now) {
          var elapsed = now - startTime;
          var progress = Math.min(elapsed / duration, 1);
          var eased = 1 - Math.pow(1 - progress, 4);
          var current = eased * target;
          if (target >= 1000 && decimals === 0) {
            el.textContent = prefix + current.toLocaleString('en-US', { maximumFractionDigits: 0 }) + suffix;
          } else {
            el.textContent = prefix + current.toFixed(decimals) + suffix;
          }
          if (progress < 1) requestAnimationFrame(animate);
        }
        requestAnimationFrame(animate);
        observer.unobserve(el);
      }
    });
  }, { threshold: 0.3 });
  counters.forEach(function(c) { observer.observe(c); });
}

// ===================================================================
// SIDEBAR NAVIGATION
// ===================================================================
function switchNav(el) {
  if (el.dataset.nav === 'settings') { openSettings(); return; }
  document.querySelectorAll('.nav-item').forEach(function(n) { n.classList.remove('active'); });
  el.classList.add('active');
}

// ===================================================================
// DATA TABLE
// ===================================================================
var transactionData = [
  { id: 'TXN-7829', name: 'Olivia Martin', initials: 'OM', color: '#8B5CF6', amount: '$1,245.00', rawAmount: 1245, status: 'Completed', date: 'Feb 7, 2026' },
  { id: 'TXN-7828', name: 'Jackson Lee', initials: 'JL', color: '#06B6D4', amount: '$832.00', rawAmount: 832, status: 'Completed', date: 'Feb 7, 2026' },
  { id: 'TXN-7827', name: 'Isabella Nguyen', initials: 'IN', color: '#F97316', amount: '$2,104.00', rawAmount: 2104, status: 'Pending', date: 'Feb 6, 2026' },
  { id: 'TXN-7826', name: 'William Chen', initials: 'WC', color: '#22C55E', amount: '$450.00', rawAmount: 450, status: 'Completed', date: 'Feb 6, 2026' },
  { id: 'TXN-7825', name: 'Sofia Davis', initials: 'SD', color: '#EAB308', amount: '$3,890.00', rawAmount: 3890, status: 'Completed', date: 'Feb 5, 2026' },
  { id: 'TXN-7824', name: 'Liam Anderson', initials: 'LA', color: '#EF4444', amount: '$178.50', rawAmount: 178.5, status: 'Failed', date: 'Feb 5, 2026' },
  { id: 'TXN-7823', name: 'Emma Wilson', initials: 'EW', color: '#8B5CF6', amount: '$1,560.00', rawAmount: 1560, status: 'Completed', date: 'Feb 4, 2026' },
  { id: 'TXN-7822', name: 'Noah Taylor', initials: 'NT', color: '#06B6D4', amount: '$920.00', rawAmount: 920, status: 'Pending', date: 'Feb 4, 2026' },
  { id: 'TXN-7821', name: 'Ava Thompson', initials: 'AT', color: '#F97316', amount: '$2,450.00', rawAmount: 2450, status: 'Completed', date: 'Feb 3, 2026' },
  { id: 'TXN-7820', name: 'Ethan Brown', initials: 'EB', color: '#22C55E', amount: '$675.00', rawAmount: 675, status: 'Completed', date: 'Feb 3, 2026' }
];

var currentFilter = 'all';
var selectedRows = {};

function initTable() { renderTable(transactionData); }

function renderTable(data) {
  var tbody = document.getElementById('tableBody');
  var html = '';
  for (var i = 0; i < data.length; i++) {
    var t = data[i];
    var statusClass = t.status === 'Completed' ? 'success' : t.status === 'Pending' ? 'warning' : 'error';
    var checked = selectedRows[t.id] ? 'checked' : '';
    html += '<tr data-status="' + t.status + '">';
    html += '<td style="padding-left:24px;"><div class="custom-checkbox ' + checked + '" onclick="toggleRow(\'' + t.id + '\',this)"></div></td>';
    html += '<td><span style="font-weight:500;font-family:monospace;font-size:13px;color:var(--accent-primary);">' + t.id + '</span></td>';
    html += '<td><div style="display:flex;align-items:center;gap:10px;">';
    html += '<div style="width:32px;height:32px;border-radius:50%;background:' + t.color + ';display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;">' + t.initials + '</div>';
    html += '<span style="font-weight:500;">' + t.name + '</span></div></td>';
    html += '<td style="font-weight:600;">' + t.amount + '</td>';
    html += '<td><span class="status-pill ' + statusClass + '"><span class="dot"></span>' + t.status + '</span></td>';
    html += '<td style="color:var(--text-secondary);">' + t.date + '</td>';
    html += '<td><i data-lucide="more-horizontal" style="width:16px;height:16px;color:var(--text-secondary);cursor:pointer;"></i></td>';
    html += '</tr>';
  }
  tbody.innerHTML = html;
  lucide.createIcons();
}

function filterTableTab(btn, status) {
  document.querySelectorAll('#tableTabs .tab-btn').forEach(function(b) { b.classList.remove('active'); });
  btn.classList.add('active');
  currentFilter = status;
  applyFilters();
}

function filterTable() { applyFilters(); }

function applyFilters() {
  var search = document.getElementById('tableSearch').value.toLowerCase();
  var filtered = transactionData.filter(function(t) {
    var matchStatus = currentFilter === 'all' || t.status === currentFilter;
    var matchSearch = !search || t.name.toLowerCase().indexOf(search) !== -1 || t.id.toLowerCase().indexOf(search) !== -1 || t.amount.toLowerCase().indexOf(search) !== -1;
    return matchStatus && matchSearch;
  });
  renderTable(filtered);
}

function toggleRow(id, el) {
  if (selectedRows[id]) { delete selectedRows[id]; el.classList.remove('checked'); }
  else { selectedRows[id] = true; el.classList.add('checked'); }
}

function toggleSelectAll() {
  var el = document.getElementById('selectAll');
  var checkboxes = document.querySelectorAll('#tableBody .custom-checkbox');
  if (el.classList.contains('checked')) {
    el.classList.remove('checked');
    selectedRows = {};
    checkboxes.forEach(function(c) { c.classList.remove('checked'); });
  } else {
    el.classList.add('checked');
    transactionData.forEach(function(t) { selectedRows[t.id] = true; });
    checkboxes.forEach(function(c) { c.classList.add('checked'); });
  }
}

var sortDir = {};
function sortTable(colIndex) {
  sortDir[colIndex] = !sortDir[colIndex];
  var dir = sortDir[colIndex] ? 1 : -1;
  transactionData.sort(function(a, b) {
    var va, vb;
    if (colIndex === 1) { va = a.id; vb = b.id; }
    else if (colIndex === 2) { va = a.name; vb = b.name; }
    else if (colIndex === 3) { return (a.rawAmount - b.rawAmount) * dir; }
    else if (colIndex === 5) { va = new Date(a.date); vb = new Date(b.date); return (va - vb) * dir; }
    if (typeof va === 'string') {
      if (va < vb) return -1 * dir;
      if (va > vb) return 1 * dir;
    }
    return 0;
  });
  applyFilters();
}

// ===================================================================
// ACTIVITY FEED
// ===================================================================
function initActivityFeed() {
  var activities = [
    { initials: 'OM', color: '#8B5CF6', name: 'Olivia Martin', action: 'completed a purchase of <strong>$1,245.00</strong>', time: '2 minutes ago' },
    { initials: 'JL', color: '#06B6D4', name: 'Jackson Lee', action: 'upgraded to <strong>Pro Plan</strong>', time: '15 minutes ago' },
    { initials: 'IN', color: '#F97316', name: 'Isabella Nguyen', action: 'submitted a support ticket <strong>#4821</strong>', time: '32 minutes ago' },
    { initials: 'WC', color: '#22C55E', name: 'William Chen', action: 'left a 5-star review on <strong>Analytics Suite</strong>', time: '1 hour ago' },
    { initials: 'SD', color: '#EAB308', name: 'Sofia Davis', action: 'exported <strong>Q4 Revenue Report</strong>', time: '2 hours ago' },
    { initials: 'LA', color: '#EF4444', name: 'Liam Anderson', action: 'payment of <strong>$178.50</strong> was declined', time: '3 hours ago' },
    { initials: 'EW', color: '#8B5CF6', name: 'Emma Wilson', action: 'added 3 team members to <strong>Marketing</strong> workspace', time: '4 hours ago' },
    { initials: 'NT', color: '#06B6D4', name: 'Noah Taylor', action: 'started a free trial of <strong>Enterprise</strong>', time: '5 hours ago' }
  ];
  var feed = document.getElementById('activityFeed');
  var html = '';
  for (var i = 0; i < activities.length; i++) {
    var a = activities[i];
    html += '<div style="display:flex;gap:12px;align-items:flex-start;padding:12px;border-radius:8px;transition:background 0.2s;cursor:pointer;" onmouseover="this.style.background=\'var(--surface-elevated)\'" onmouseout="this.style.background=\'transparent\'">';
    html += '<div class="activity-avatar" style="background:' + a.color + ';">' + a.initials + '</div>';
    html += '<div style="flex:1;min-width:0;">';
    html += '<div style="font-size:14px;line-height:1.5;"><strong>' + a.name + '</strong> ' + a.action + '</div>';
    html += '<div style="font-size:12px;color:var(--text-secondary);margin-top:4px;">' + a.time + '</div>';
    html += '</div></div>';
  }
  feed.innerHTML = html;
}

// ===================================================================
// NOTIFICATIONS
// ===================================================================
var notifsData = [
  { icon: 'message-square', color: '#8B5CF6', title: 'New comment on report', desc: 'Jackson mentioned you in Q4 Analysis', time: '5m ago', type: 'mentions' },
  { icon: 'alert-triangle', color: '#EAB308', title: 'Payment processing delay', desc: 'Stripe gateway experiencing latency', time: '12m ago', type: 'system' },
  { icon: 'user-plus', color: '#22C55E', title: 'New team member', desc: 'Emma Wilson joined the Marketing team', time: '1h ago', type: 'all' },
  { icon: 'zap', color: '#F97316', title: 'Usage limit approaching', desc: 'API calls at 85% of monthly quota', time: '2h ago', type: 'system' },
  { icon: 'at-sign', color: '#06B6D4', title: 'Mentioned in #revenue', desc: 'Sofia tagged you in a discussion', time: '3h ago', type: 'mentions' }
];

function initNotifications() { renderNotifs('all'); }

function renderNotifs(tab) {
  var filtered = tab === 'all' ? notifsData : notifsData.filter(function(n) { return n.type === tab; });
  var list = document.getElementById('notifList');
  var html = '';
  for (var i = 0; i < filtered.length; i++) {
    var n = filtered[i];
    html += '<div style="display:flex;gap:12px;padding:12px;border-radius:8px;border:1px solid var(--border);background:var(--surface);transition:all 0.2s;cursor:pointer;" onmouseover="this.style.borderColor=\'var(--accent-primary)\'" onmouseout="this.style.borderColor=\'var(--border)\'">';
    html += '<div style="width:36px;height:36px;border-radius:8px;background:rgba(139,92,246,0.1);display:flex;align-items:center;justify-content:center;flex-shrink:0;">';
    html += '<i data-lucide="' + n.icon + '" style="width:16px;height:16px;color:' + n.color + ';"></i></div>';
    html += '<div style="flex:1;min-width:0;">';
    html += '<div style="font-size:14px;font-weight:500;">' + n.title + '</div>';
    html += '<div style="font-size:12px;color:var(--text-secondary);margin-top:2px;">' + n.desc + '</div></div>';
    html += '<div style="font-size:11px;color:var(--text-secondary);white-space:nowrap;">' + n.time + '</div></div>';
  }
  list.innerHTML = html;
  lucide.createIcons();
}

function switchNotifTab(btn, tab) {
  document.querySelectorAll('#notifTabs .tab-btn').forEach(function(b) { b.classList.remove('active'); });
  btn.classList.add('active');
  renderNotifs(tab);
}

// ===================================================================
// TOP PRODUCTS
// ===================================================================
function initTopProducts() {
  var products = [
    { rank: 1, name: 'SaaS Pro', revenue: '$18,420', growth: '+24%', color: '#8B5CF6' },
    { rank: 2, name: 'Analytics Suite', revenue: '$14,230', growth: '+18%', color: '#06B6D4' },
    { rank: 3, name: 'API Gateway', revenue: '$8,104', growth: '+12%', color: '#F97316' },
    { rank: 4, name: 'Cloud Storage', revenue: '$5,480', growth: '+6%', color: '#22C55E' },
    { rank: 5, name: 'Dev Tools', revenue: '$2,000', growth: '+3%', color: '#EAB308' }
  ];
  var container = document.getElementById('topProducts');
  var html = '';
  for (var i = 0; i < products.length; i++) {
    var p = products[i];
    html += '<div style="display:flex;align-items:center;gap:12px;">';
    html += '<div style="width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,' + p.color + ',transparent);display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;">' + p.rank + '</div>';
    html += '<div style="flex:1;min-width:0;"><div style="font-size:14px;font-weight:500;">' + p.name + '</div><div style="font-size:12px;color:var(--text-secondary);">' + p.revenue + '</div></div>';
    html += '<span style="font-size:12px;color:var(--success);font-weight:600;">' + p.growth + '</span></div>';
  }
  container.innerHTML = html;
}

// ===================================================================
// REGION BARS
// ===================================================================
function initRegionBars() {
  var regions = [
    { name: 'North America', pct: 42, color: 'linear-gradient(90deg,#8B5CF6,#06B6D4)' },
    { name: 'Europe', pct: 28, color: 'linear-gradient(90deg,#06B6D4,#22C55E)' },
    { name: 'Asia Pacific', pct: 18, color: 'linear-gradient(90deg,#F97316,#EAB308)' },
    { name: 'Latin America', pct: 8, color: 'linear-gradient(90deg,#22C55E,#06B6D4)' },
    { name: 'Other', pct: 4, color: 'linear-gradient(90deg,#A1A1AA,#27272A)' }
  ];
  var container = document.getElementById('regionBars');
  var html = '';
  for (var i = 0; i < regions.length; i++) {
    var r = regions[i];
    html += '<div>';
    html += '<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">';
    html += '<span style="font-size:13px;color:var(--text-secondary);">' + r.name + '</span>';
    html += '<span style="font-size:13px;font-weight:600;">' + r.pct + '%</span></div>';
    html += '<div class="h-bar-track"><div class="h-bar-fill" style="width:0%;background:' + r.color + ';" data-width="' + r.pct + '%"></div></div></div>';
  }
  container.innerHTML = html;
  // Animate bars on scroll
  var obs = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        var bars = entry.target.querySelectorAll('.h-bar-fill');
        bars.forEach(function(bar) {
          setTimeout(function() { bar.style.width = bar.dataset.width; }, 200);
        });
        obs.unobserve(entry.target);
      }
    });
  }, { threshold: 0.3 });
  obs.observe(container);
}

// ===================================================================
// GOAL RINGS (SVG Progress Circles)
// ===================================================================
function initGoalRings() {
  var goals = [
    { label: 'Revenue Target', pct: 78, color: '#8B5CF6' },
    { label: 'User Acquisition', pct: 92, color: '#06B6D4' },
    { label: 'Retention Rate', pct: 65, color: '#F97316' }
  ];
  var container = document.getElementById('goalRings');
  var radius = 32;
  var circumference = 2 * Math.PI * radius;
  var html = '';
  for (var i = 0; i < goals.length; i++) {
    var g = goals[i];
    var offset = circumference - (g.pct / 100) * circumference;
    html += '<div style="display:flex;align-items:center;gap:16px;">';
    html += '<svg width="80" height="80" viewBox="0 0 80 80">';
    html += '<circle cx="40" cy="40" r="' + radius + '" fill="none" stroke="#1C1C20" stroke-width="6"/>';
    html += '<circle cx="40" cy="40" r="' + radius + '" fill="none" stroke="' + g.color + '" stroke-width="6" stroke-linecap="round" stroke-dasharray="' + circumference + '" stroke-dashoffset="' + circumference + '" class="progress-ring-circle" data-target-offset="' + offset + '" transform="rotate(-90 40 40)"/>';
    html += '<text x="40" y="44" text-anchor="middle" fill="#FAFAFA" font-size="14" font-weight="700" font-family="Inter,sans-serif">' + g.pct + '%</text>';
    html += '</svg>';
    html += '<div><div style="font-size:14px;font-weight:500;">' + g.label + '</div><div style="font-size:12px;color:var(--text-secondary);">' + g.pct + '% completed</div></div></div>';
  }
  container.innerHTML = html;
  // Animate rings on scroll
  var obs = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        var rings = entry.target.querySelectorAll('.progress-ring-circle');
        rings.forEach(function(ring) {
          setTimeout(function() { ring.style.strokeDashoffset = ring.dataset.targetOffset; }, 300);
        });
        obs.unobserve(entry.target);
      }
    });
  }, { threshold: 0.3 });
  obs.observe(container);
}

// ===================================================================
// CHART TOOLTIPS
// ===================================================================
function initChartTooltips() {
  var container = document.getElementById('lineChartContainer');
  var tooltip = document.getElementById('lineTooltip');
  if (!container || !tooltip) return;
  var dots = document.querySelectorAll('.chart-dot');
  dots.forEach(function(dot) {
    dot.addEventListener('mouseenter', function() {
      var val = dot.getAttribute('data-val');
      tooltip.textContent = val;
      tooltip.style.display = 'block';
      var svgEl = dot.closest('svg');
      var svgRect = svgEl.getBoundingClientRect();
      var cx = parseFloat(dot.getAttribute('cx'));
      var cy = parseFloat(dot.getAttribute('cy'));
      var scaleX = svgRect.width / 640;
      var scaleY = svgRect.height / 260;
      tooltip.style.left = (cx * scaleX - 30) + 'px';
      tooltip.style.top = (cy * scaleY - 38) + 'px';
      dot.setAttribute('r', '6');
    });
    dot.addEventListener('mouseleave', function() {
      tooltip.style.display = 'none';
      dot.setAttribute('r', '4');
    });
  });
}

// ===================================================================
// SCROLL REVEAL (IntersectionObserver)
// ===================================================================
function initScrollReveal() {
  var observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });
  document.querySelectorAll('.reveal').forEach(function(el) { observer.observe(el); });
}

// ===================================================================
// COMMAND PALETTE
// ===================================================================
var cmdItems = [
  { section: 'Recent', icon: 'file-text', label: 'Q4 Revenue Report', shortcut: '' },
  { section: 'Recent', icon: 'bar-chart-3', label: 'Analytics Dashboard', shortcut: '' },
  { section: 'Recent', icon: 'users', label: 'Customer Segments', shortcut: '' },
  { section: 'Recent', icon: 'settings', label: 'Billing Settings', shortcut: '' },
  { section: 'Quick Actions', icon: 'plus-circle', label: 'New Report', shortcut: 'Ctrl+N' },
  { section: 'Quick Actions', icon: 'download', label: 'Export Data', shortcut: 'Ctrl+E' },
  { section: 'Quick Actions', icon: 'user-plus', label: 'Invite Member', shortcut: 'Ctrl+I' },
  { section: 'Quick Actions', icon: 'book-open', label: 'View Docs', shortcut: 'Ctrl+D' },
  { section: 'Navigation', icon: 'layout-dashboard', label: 'Overview', shortcut: 'G then O' },
  { section: 'Navigation', icon: 'bar-chart-3', label: 'Analytics', shortcut: 'G then A' },
  { section: 'Navigation', icon: 'users', label: 'Customers', shortcut: 'G then C' },
  { section: 'Navigation', icon: 'wallet', label: 'Revenue', shortcut: 'G then R' }
];
var cmdHighlighted = 0;
var filteredCmdItems = cmdItems.slice();

function initCommandPalette() {
  renderCommandItems(filteredCmdItems);
  document.addEventListener('keydown', function(e) {
    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
      e.preventDefault();
      openCommandPalette();
    }
    if (e.key === 'Escape') {
      closeCommandPalette();
      closeSettings();
    }
  });
}

function renderCommandItems(items) {
  var results = document.getElementById('cmdResults');
  var html = '';
  var currentSection = '';
  for (var i = 0; i < items.length; i++) {
    var item = items[i];
    if (item.section !== currentSection) {
      currentSection = item.section;
      html += '<div class="cmd-section-title">' + currentSection + '</div>';
    }
    var hl = i === cmdHighlighted ? ' highlighted' : '';
    html += '<div class="cmd-item' + hl + '" data-index="' + i + '" onmouseenter="cmdHighlighted=' + i + ';highlightCmd()" onclick="executeCmdItem(' + i + ')">';
    html += '<i data-lucide="' + item.icon + '" style="width:16px;height:16px;"></i>';
    html += '<span>' + item.label + '</span>';
    if (item.shortcut) html += '<span class="shortcut">' + item.shortcut + '</span>';
    html += '</div>';
  }
  results.innerHTML = html;
  lucide.createIcons();
}

function openCommandPalette() {
  document.getElementById('cmdOverlay').classList.add('open');
  var inp = document.getElementById('cmdInput');
  inp.value = '';
  cmdHighlighted = 0;
  filteredCmdItems = cmdItems.slice();
  renderCommandItems(filteredCmdItems);
  setTimeout(function() { inp.focus(); }, 100);
}

function closeCommandPalette(e) {
  if (e && e.target && e.target.id !== 'cmdOverlay') return;
  document.getElementById('cmdOverlay').classList.remove('open');
}

function filterCommands() {
  var query = document.getElementById('cmdInput').value.toLowerCase();
  filteredCmdItems = cmdItems.filter(function(item) { return item.label.toLowerCase().indexOf(query) !== -1; });
  cmdHighlighted = 0;
  renderCommandItems(filteredCmdItems);
}

function highlightCmd() {
  var items = document.querySelectorAll('.cmd-item');
  items.forEach(function(el) {
    var idx = parseInt(el.dataset.index);
    if (idx === cmdHighlighted) el.classList.add('highlighted');
    else el.classList.remove('highlighted');
  });
}

function handleCmdKey(e) {
  if (e.key === 'ArrowDown') {
    e.preventDefault();
    cmdHighlighted = Math.min(cmdHighlighted + 1, filteredCmdItems.length - 1);
    highlightCmd();
  } else if (e.key === 'ArrowUp') {
    e.preventDefault();
    cmdHighlighted = Math.max(cmdHighlighted - 1, 0);
    highlightCmd();
  } else if (e.key === 'Enter') {
    e.preventDefault();
    executeCmdItem(cmdHighlighted);
  } else if (e.key === 'Escape') {
    document.getElementById('cmdOverlay').classList.remove('open');
  }
}

function executeCmdItem(i) {
  if (filteredCmdItems[i]) {
    showToast('Opened: ' + filteredCmdItems[i].label, 'success');
    document.getElementById('cmdOverlay').classList.remove('open');
  }
}

// ===================================================================
// SETTINGS PANEL
// ===================================================================
function openSettings() {
  document.getElementById('settingsOverlay').classList.add('open');
  document.getElementById('settingsPanel').classList.add('open');
}

function closeSettings() {
  document.getElementById('settingsOverlay').classList.remove('open');
  document.getElementById('settingsPanel').classList.remove('open');
}

function switchSettingsTab(btn, tab) {
  document.querySelectorAll('#settingsTabs .tab-btn').forEach(function(b) { b.classList.remove('active'); });
  btn.classList.add('active');
  document.getElementById('settingsProfile').style.display = tab === 'profile' ? 'block' : 'none';
  document.getElementById('settingsAppearance').style.display = tab === 'appearance' ? 'block' : 'none';
  document.getElementById('settingsNotifs').style.display = tab === 'notifs' ? 'block' : 'none';
  document.getElementById('settingsIntegrations').style.display = tab === 'integrations' ? 'block' : 'none';
}

// ===================================================================
// TOAST SYSTEM
// ===================================================================
function showToast(message, type) {
  type = type || 'info';
  var container = document.getElementById('toastContainer');
  var toast = document.createElement('div');
  toast.className = 'toast';
  var iconMap = { success: 'check-circle', warning: 'alert-triangle', error: 'alert-circle', info: 'info' };
  var colorMap = { success: '#22C55E', warning: '#EAB308', error: '#EF4444', info: '#8B5CF6' };
  toast.innerHTML = '<i data-lucide="' + iconMap[type] + '" style="width:18px;height:18px;color:' + colorMap[type] + ';flex-shrink:0;"></i>' +
    '<span>' + message + '</span>' +
    '<i data-lucide="x" class="toast-close" style="width:16px;height:16px;" onclick="dismissToast(this.parentElement)"></i>';
  container.appendChild(toast);
  lucide.createIcons();
  setTimeout(function() { dismissToast(toast); }, 5000);
}

function dismissToast(el) {
  if (!el || !el.parentElement) return;
  el.classList.add('leaving');
  setTimeout(function() { if (el.parentElement) el.parentElement.removeChild(el); }, 300);
}
</script>
</body>
</html>